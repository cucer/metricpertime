(this.webpackJsonpmetricpertime=this.webpackJsonpmetricpertime||[]).push([[0],{16:function(t,e,n){},19:function(t,e,n){},23:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n.n(r),a=n(10),s=n.n(a),u=(n(16),n(8)),o=(n(19),n(2)),i=n.n(o),l=n(4),p=n(5),f=n(11),h=n(7),j=n.n(h),b=function(t,e){return j.a.groupBy(t,(function(t){return function(t,e){return f(t).format(e)}(t.created_time,e)}))},d=function(t){var e=b(t,"MM/YYYY"),n=[];return Object.keys(e).map((function(t){var r=e[t].reduce((function(t,e){return t+e.message.length}),0)/e[t].length;return n.push({key:t,result:r}),r})),n},m=n(0);var O=function(){var t=Object(r.useState)([]),e=Object(p.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)([]),s=Object(p.a)(a,2),u=s[0],o=s[1],f=Object(r.useState)(),h=Object(p.a)(f,2),O=h[0],v=h[1],g=Object(r.useState)(!1),x=Object(p.a)(g,2),k=x[0],y=x[1],Y=function(){var t=Object(l.a)(i.a.mark((function t(e){var n,r,a,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=1,r=[],a=[];case 3:if(!(n<=10)){t.next=12;break}return t.t0=r,t.next=7,fetch("".concat("https://api.supermetrics.com/assignment/posts","?sl_token=").concat(e,"&page=").concat(n)).then((function(t){return t.json()})).then((function(t){return t.data.posts})).catch((function(t){y(!1),console.error(t)}));case 7:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),n+=1,t.next=3;break;case 12:for(s=0;s<r.length;s++)r[s].map((function(t){return a.push(t)}));y(!1),c(a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){(function(){var t=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(!0),t.next=3,fetch("https://api.supermetrics.com/assignment/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:"ju16a6m81mhid5ue1z3v2g0uh",email:"test@test.com",name:"John Doe"})}).then((function(t){return t.json()})).then((function(t){Y(t.data.sl_token)})).catch((function(t){y(!1),console.error(t)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var M=function(){var t=Object(l.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),o(d(n)),v(1);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(l.a)(i.a.mark((function t(e){var n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=new Blob([JSON.stringify(u)],{type:"application/json"}),t.next=4,URL.createObjectURL(n);case 4:r=t.sent,(c=document.createElement("a")).href=r,c.download="data.json",document.body.appendChild(c),c.click(),document.body.removeChild(c);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)(m.Fragment,{children:k?Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"Loading Data. Please Wait!"})}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Metrics"}),Object(m.jsx)("button",{onClick:M,className:"button",children:"avgPostLenPerMonth"}),Object(m.jsx)("button",{onClick:function(t){t.preventDefault(),o(function(t){var e=b(t,"MM/YYYY"),n=[];return Object.keys(e).map((function(t){var r=Math.max.apply(null,e[t].map((function(t){return t.message.length})));return n.push({key:t,result:r}),r})),n}(n)),v(2)},className:"button",children:"longestPostPerMonth"}),Object(m.jsx)("button",{onClick:function(t){t.preventDefault(),o(function(t){var e=b(t,"W/YYYY"),n=[];return Object.keys(e).map((function(t){var r=e[t].length;return n.push({key:t,result:r}),r})),n}(n)),v(3)},className:"button",children:"totalPostsByWeek"}),Object(m.jsx)("button",{onClick:function(t){t.preventDefault(),o(function(t){var e=b(t,"MM/YYYY"),n=[];return Object.keys(e).map((function(t){var r=j.a.groupBy(e[t],"from_id"),c=Object.keys(r).map((function(t){return r[t].length})),a=c.reduce((function(t,e){return t+e}),0)/c.length;return n.push({key:t,result:a}),a})),n}(n)),v(4)},className:"button",children:"avgPostsPerUserPerMonth"}),Object(m.jsx)("div",{className:"main",children:u.map((function(t,e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{children:[1===O||2===O||4===O?"Month: ":"Week: ",t.key]})," - ",Object(m.jsxs)("span",{children:[1===O?"Avg: ":2===O?"Longest: ":3===O?"Total: ":"Avg: ",Math.round(100*t.result)/100]})]},e)}))}),Object(m.jsx)("div",{children:u&&u.length>0?Object(m.jsx)("button",{onClick:w,className:"button",children:"Download Metrics"}):null})]})})};var v=function(){return Object(r.useEffect)((function(){u.a.initialize("UA-62711254-5"),u.a.pageview("/metrics")}),[]),Object(m.jsx)("div",{className:"app",children:Object(m.jsx)(O,{})})};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(v,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.17a2e149.chunk.js.map